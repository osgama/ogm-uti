# /opt/miapp/Autosys/oc-envs.ini
# Líneas que comienzan con # son comentarios.

# =====================================================================
#  GLOBALES (puedes sobreescribir en cada ambiente)
# =====================================================================
[settings]
# Tamaño de bloque al subir pods (N por bloque)
BLOCK_SIZE=4
# Pausa en segundos entre bloques
BLOCK_DELAY=120
# Tiempo máx. para que cada deployment quede en 0 réplicas
TIMEOUT_DOWN=180
# Tiempo máx. de rollout al subir (por deployment)
TIMEOUT_UP=600
# Intervalo de sondeo (segundos) para checar estado
SLEEP_INT=3

# Modo de reinicio:
#  - simple   : scale 0 -> 1 y esperar rollout
#  - redeploy : oc rollout restart + scale 1 + esperar rollout
ROLLOUT_MODE=simple

# Logging
LOG_DIR=/var/log/miapp
# INFO o DEBUG
LOG_VERBOSITY=INFO
# true/false: si falla, adjuntar oc describe + últimos events
COLLECT_DIAG=true

# Clave por defecto (no-prod). PROD/COB la sobreescriben abajo.
SECRET_KEY_FILE=/run/secrets/oc_secret_key_nonprod
# (Opcional) Namespace por defecto para todos los ambientes.
# Puedes sobreescribirlo por ambiente o en [pods].
# NAMESPACE=mi-namespace-global

# =====================================================================
#  AMBIENTES (OBLIGATORIO definir OC_SERVER, USERNAME, PASSWORD)
#  sobreescribir cualquiera de las claves de [settings] aquí.
#  Si lo haces, el valor del ambiente prevalece sobre [settings].
# =====================================================================
[dev]
# Credenciales y endpoint
OC_SERVER=https://api.ocp-dev:6443
USERNAME=svc_ocp_nonprod
# Pega aquí el blob cifrado (base64) generado con make-oc-password-blob.sh
PASSWORD=ENC:PEGA_AQUI_TU_BLOB_DEV
# Ruta del archivo de clave para descifrar el PASSWORD (no-prod)
SECRET_KEY_FILE=/run/secrets/oc_secret_key_nonprod
# --- Overrides opcionales SOLO para este ambiente (descomenta si los quieres cambiar en dev) ---
# BLOCK_SIZE=4            # tamaño de bloque al subir
# BLOCK_DELAY=120         # segundos entre bloques
# TIMEOUT_DOWN=180        # espera para quedar en 0
# TIMEOUT_UP=600          # espera de rollout al subir
# SLEEP_INT=3             # intervalo de sondeo (segundos)
# ROLLOUT_MODE=simple     # simple | redeploy
# LOG_DIR=/var/log/miapp  # carpeta de logs
# LOG_VERBOSITY=DEBUG     # INFO | DEBUG
# COLLECT_DIAG=true       # adjuntar describe/events en fallos
# NAMESPACE=miapp-dev     # namespace específico para dev


[sit]
# Credenciales y endpoint
OC_SERVER=https://api.ocp-dev:6443
USERNAME=svc_ocp_nonprod
# Pega aquí el blob cifrado (base64) generado con make-oc-password-blob.sh
PASSWORD=ENC:PEGA_AQUI_TU_BLOB_DEV
# Ruta del archivo de clave para descifrar el PASSWORD (no-prod)
SECRET_KEY_FILE=/run/secrets/oc_secret_key_nonprod
# --- Overrides opcionales SOLO para este ambiente (descomenta si los quieres cambiar en dev) ---
# BLOCK_SIZE=4            # tamaño de bloque al subir
# BLOCK_DELAY=120         # segundos entre bloques
# TIMEOUT_DOWN=180        # espera para quedar en 0
# TIMEOUT_UP=600          # espera de rollout al subir
# SLEEP_INT=3             # intervalo de sondeo (segundos)
# ROLLOUT_MODE=simple     # simple | redeploy
# LOG_DIR=/var/log/miapp  # carpeta de logs
# LOG_VERBOSITY=DEBUG     # INFO | DEBUG
# COLLECT_DIAG=true       # adjuntar describe/events en fallos
# NAMESPACE=miapp-dev     # namespace específico para dev

[uat]
# Credenciales y endpoint
OC_SERVER=https://api.ocp-dev:6443
USERNAME=svc_ocp_nonprod
# Pega aquí el blob cifrado (base64) generado con make-oc-password-blob.sh
PASSWORD=ENC:PEGA_AQUI_TU_BLOB_DEV
# Ruta del archivo de clave para descifrar el PASSWORD (no-prod)
SECRET_KEY_FILE=/run/secrets/oc_secret_key_nonprod
# --- Overrides opcionales SOLO para este ambiente (descomenta si los quieres cambiar en dev) ---
# BLOCK_SIZE=4            # tamaño de bloque al subir
# BLOCK_DELAY=120         # segundos entre bloques
# TIMEOUT_DOWN=180        # espera para quedar en 0
# TIMEOUT_UP=600          # espera de rollout al subir
# SLEEP_INT=3             # intervalo de sondeo (segundos)
# ROLLOUT_MODE=simple     # simple | redeploy
# LOG_DIR=/var/log/miapp  # carpeta de logs
# LOG_VERBOSITY=DEBUG     # INFO | DEBUG
# COLLECT_DIAG=true       # adjuntar describe/events en fallos
# NAMESPACE=miapp-dev     # namespace específico para dev

[prod]
# Credenciales y endpoint
OC_SERVER=https://api.ocp-dev:6443
USERNAME=svc_ocp_nonprod
# Pega aquí el blob cifrado (base64) generado con make-oc-password-blob.sh
PASSWORD=ENC:PEGA_AQUI_TU_BLOB_DEV
# Ruta del archivo de clave para descifrar el PASSWORD (no-prod)
SECRET_KEY_FILE=/run/secrets/oc_secret_key_nonprod
# --- Overrides opcionales SOLO para este ambiente (descomenta si los quieres cambiar en dev) ---
# BLOCK_SIZE=4            # tamaño de bloque al subir
# BLOCK_DELAY=120         # segundos entre bloques
# TIMEOUT_DOWN=180        # espera para quedar en 0
# TIMEOUT_UP=600          # espera de rollout al subir
# SLEEP_INT=3             # intervalo de sondeo (segundos)
# ROLLOUT_MODE=simple     # simple | redeploy
# LOG_DIR=/var/log/miapp  # carpeta de logs
# LOG_VERBOSITY=DEBUG     # INFO | DEBUG
# COLLECT_DIAG=true       # adjuntar describe/events en fallos
# NAMESPACE=miapp-dev     # namespace específico para dev

[cob]
# Credenciales y endpoint
OC_SERVER=https://api.ocp-dev:6443
USERNAME=svc_ocp_nonprod
# Pega aquí el blob cifrado (base64) generado con make-oc-password-blob.sh
PASSWORD=ENC:PEGA_AQUI_TU_BLOB_DEV
# Ruta del archivo de clave para descifrar el PASSWORD (no-prod)
SECRET_KEY_FILE=/run/secrets/oc_secret_key_nonprod
# --- Overrides opcionales SOLO para este ambiente (descomenta si los quieres cambiar en dev) ---
# BLOCK_SIZE=4            # tamaño de bloque al subir
# BLOCK_DELAY=120         # segundos entre bloques
# TIMEOUT_DOWN=180        # espera para quedar en 0
# TIMEOUT_UP=600          # espera de rollout al subir
# SLEEP_INT=3             # intervalo de sondeo (segundos)
# ROLLOUT_MODE=simple     # simple | redeploy
# LOG_DIR=/var/log/miapp  # carpeta de logs
# LOG_VERBOSITY=DEBUG     # INFO | DEBUG
# COLLECT_DIAG=true       # adjuntar describe/events en fallos
# NAMESPACE=miapp-dev     # namespace específico para dev

# =========================
#  LISTA COMÚN (orden importa)
# =========================
[pods]
DEPLOYMENTS=deploy/api,deploy/web,deploy/payments,deploy/inventory,deploy/billing,deploy/notifications
# Fallback de namespace si no está en [settings] ni en el ambiente:
# NAMESPACE=mi-namespace-comun
